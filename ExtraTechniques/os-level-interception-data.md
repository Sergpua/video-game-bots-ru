# Перехват данных на уровне ОС

В третьей главе мы рассмотрели методы чтения состояний игровых объектов из памяти процесса игрового приложения. Хорошо продуманная защита может значительно усложнить использование этих методов. В этом случае имеет смысл попробовать альтернативный подход. Подмена или модификация системных библиотек ОС позволит вам изменить точку перехвата данных. Вместо чтения памяти процесса, информацию об игровых объектах будут предоставлять динамические библиотеки, которые не контролируются защитой.

## Инструменты для разработки

Нам предстоит работа с WinAPI функциями и системными библиотеками. Лучшим языком для этой задачи является C++. Для компиляции примеров воспользуемся Visual Studio IDE. Инструкцию по её установке вы можете найти в третьей главе.

Есть несколько решений с открытым исходным кодом для перехвата вызовов WinAPI. Первое из них называется [**DLL Wrapper Generator**](https://m4v3n.wordpress.com/2012/08/08/dll-wrapper-generator) (генератор обёрток DLL). Мы будем использовать его, чтобы создавать обёртки для системных библиотек.

Для установки генератора выполните следующие шаги:

1. Скачайте архив со скриптами со [страницы проекта на Github](https://github.com/mavenlin/Dll_Wrapper_Gen/archive/master.zip).

2. Скачайте и установите [Python версии 2.7](http://www.python.org/downloads).

Второе решение, которым мы воспользуемся, называестя [**Deviare**](http://www.nektra.com/products/deviare-api-hook-windows). Это [**фреймворк**](https://ru.wikipedia.org/wiki/Фреймворк) для перехвата вызовов DLL библиотек.

Для установке Deviare выполните следующее:

1. Скачайте [архив](http://github.com/nektra/Deviare2/releases/download/v2.8.0/Deviare.2.8.0.zip) с уже собранным в исполняемые файлы фреймворком.

2. Скачайте [архив](http://github.com/nektra/Deviare2/archive/v2.8.0.zip) с исходным кодом той же версии.

3. Распакуйте оба архива в разные каталоги.

Список сборок Deviare доступен на [Github странице проекта](http://github.com/nektra/Deviare2/releases). Ещё раз проверьте, что версии скачанной сборки и исходного кода совпадают.