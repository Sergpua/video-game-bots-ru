# Инструменты для разработки

Разработка внутриигровых ботов происходит на более низком уровне по сравнению с кликерами. В ней приходится оперировать простыми абстракциями ОС. Поэтому наши инструменты будут сложнее, чем в прошлой главе.

## Язык программирования

В этой главе мы будем применять только язык C++. Я рекомендую вам использовать бесплатную IDE [Microsoft Visual Studio](https://visualstudio.microsoft.com/vs/express) вместо открытого набора инструментов MinGW. Проблема в том, что MinGW плохо интегрируется с некоторыми Windows библиотеками (например dbghelp.dll). Вы можете пробовать компилировать примеры этой главы с MinGW, но будьте готовы переключиться на Visual Studio IDE.

Не забудьте обновить [Internet Explorer](https://support.microsoft.com/en-us/help/17621/internet-explorer-downloads) для того, чтобы использовать последнюю версию Visual Studio IDE.

Так же для доступа к Windows Native API и линковки с системной библиотекой `ntdll.dll` вам понадобится [Windows SDK](https://docs.microsoft.com/en-us/previous-versions/visualstudio/windows-sdk/ms717358(v=vs.110)).

## Отладчики

**Отладчик** – это инструмент для тестирования и поиска ошибок в приложениях. Обычно им пользуются разработчики программ для исправления своего кода. Но при этом у отладчиков есть возможности, которые оказываются полезными для исследования чужих приложений.

[**OllyDbg**](http://www.ollydbg.de) – этот бесплатный отладчик мы будем активно использовать на протяжении всей главы. Простой и понятный интерфейс пользователя является его главным преимуществом. Также OllyDbg предоставляет широкие возможности для анализа Windows приложений без исходного кода. Главный его недостаток – поддержка только 32-битный приложений. Рекомендую использовать последнюю версию [OllyDbg 2.0](http://www.ollydbg.de/odbg200.zip).

[**x64dbg**](https://x64dbg.com/#start) – отладчик с открытым исходным кодом, который поддерживает и 32-битные, и 64-битные приложения. Некоторые возможности OllyDbg в нём отсутствуют, поэтому при работе с ним вам придётся самостоятельно делать часть вычислений. Я рекомендую использовать x64dbg только для отладки 64-битных приложений и OllyDbg в остальных случаях.

[**WinDbg**](https://docs.microsoft.com/en-us/windows-hardware/drivers/download-the-wdk) – многоцелевой бесплатный отладчик для работы с пользовательскими приложениями, драйверами устройств, системными библиотеками и ядром ОС. Он предоставляет некоторые возможности недоступные в OllyDbg и x64dbg, а также поддерживает 32 и 64-битные приложения. Единственный серьёзный недостаток WinDbg – это неудобный пользовательский интерфейс. Эта проблема частично решается с помощью [настройки рабочего окружения](https://github.com/Deniskore/windbg-workspace), которая делает его визуально похожим на OllyDbg. К сожалению, большинство возможностей WinDbg всё равно доступны только из его [командной строки](http://www.windbg.info/doc/1-common-cmds.html).

Для настройки рабочего окружения WinDbg выполните следующие шаги:

1. Скачать архив с настройкой по ссылке:<br/>
github.com/Deniskore/windbg-workspace

2. Распаковать полученный архив `windbg-workspace-master.zip` в папку с `themes` отладчика. Путь к ней по умолчанию:<br/>
`C:\Program Files (x86)\Windows Kits\8.1\Debuggers\x64\themes`

3. Среди скопированных файлов найти и запустить `windbg.reg`. Затем нажать кнопку "Yes" в диалогах подтверждения.

После настройки окно WinDbg будет выглядеть как на иллюстрации 3-1.

![Настройка WinDbg](windbg-theme.png)

***Иллюстрация 3-1.** Главное окно WinDbg после настройки рабочего окружения*

## Инструменты для анализа памяти

Помимо отладчика нам понадобится приложение для анализа памяти запущенного процесса.

[**Cheat Engine**](https://www.cheatengine.org) – инструмент с открытым исходным кодом, предоставляющий функции сканера памяти, отладчика и **Hex-редактора** (редактор бинарных файлов). Мы будем использовать Cheat Engine в основном как сканер для поиска адреса переменной в памяти процесса и модификации её значения. Более подробно этот инструмент описан в [руководстве пользователя](https://cheatengine.org/tutorials.php).

[**HeapMemView**](http://www.nirsoft.net/utils/heap_memory_view.html) – бесплатный инструмент для анализа сегментов динамической памяти (heap, иногда переводится как "куча"), выделенных процессом. HeapMemView имеет две версии: для 32 и 64-битных приложений.
