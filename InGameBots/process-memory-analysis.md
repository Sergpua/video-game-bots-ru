# Анализ памяти процесса

Адресное пространство процеесов рассмотрено во многих книгах и статьях. Мы изучим только те аспекты этого вопроса, которые имеют отношение к поиску, чтению и записи в память.

## Адресное пространство процесса

Начнём с того, что ещё раз подчеркнём отличие исполняемого файла и запущенного процесса ОС. Файл - это некоторые данные, записанные на устройство хранения информации (например жесткий диск). Исполняемый файл содержит инструкции (или машинный код) для процессора.

Когда вы запускаете исполняемый файл, ОС выполняет несколько последовательных действий. Первое - чтение содержимого файла с устройства хранения и запись его в оперативную память (random-access memory или RAM). Благодаря этому процессор получает намного более быстрый доступ к инструкциям, поскольку скорость его интерфейса с оперативной памятью на несколько порядков выше чем с любым диском.

После загрузки исполняемого файла в оперативную память, ОС загружает все необходимые для его работы динамические библиотеки. После этого шага, процесс готов к выполнению. Для этого он должен получить процессорное время, т.е. время в течении которого CPU будет выполнять его инструкции. В многозадачных ОС распределением этого времени занимается программа планировщик (или scheduler). Каждый процесс получает единицы времени (тики или секунды) в зависимости от своего приоритета.

Чем занимается процесс? Чтобы ответить на этот вопрос, заглянем в типичный исполняемый файл. В основном он содержит алгоритмы обработки и интерпретации каких-то данных. Мы можем прийтий к выводу, что основная работа типичного процесса заключается в манипуляции данными.

Следующий вопрос: где процесс хранит свои данные? Мы уже знаем, что ОС всегда хранит исполняемые инструкции процессора в оперативной памяти. В случае процесса, он имеет право свободно выбирать место хранения данных. Это может быть жесткий диск, оперативная память или даже удалённый компьютер (например игровой сервер подключённый по сети). Большая часть данных, необходимых во время работы процесса копируются в оперативную память для ускорения доступа к ней. Поэтому, именно в RAM мы можем прочитать состояния всех игровых объектов. Они будут доступны на протяжении всего времени выполнения (или runtime) процесса.

Иллюстрация 3-2 демонстрирует элементы типичного процесса. Как правило, он состоит из нескольких модулей. Обязательный из них - это EXE, который содержит все инструкции и данные, загруженные из исполняемого файла. Другие модули (обозначенные DLL\_1 и DLL\_2) соответствуют библиотекам, подпрограммы которых вызываются из главного.

![Схема процесса](process-scheme.png)

**Иллюстрация 3-2.** *Элементы типичного процесса Windows*
