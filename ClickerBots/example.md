# Пример кликера для Lineage 2

Сейчас мы напишем простого бота кликера для известной MMORPG игры Lineage 2. В нём мы применим уже известные техники по перехвату и внедрению данных в игровое приложение.

## Обзор игры Lineage 2

Игровой процесс Lineage 2 очень типичен для жанра RPG. В начале надо выбрать одного из нескольких доступных персонажей. Для получения новых умений и покупки предметов игрок должен выполнять задания (или квесты) и охотиться на монстров. Этот процесс получения ресурсов называется "фарминг" (farming). Игроки всегда могут общаться и взаимодействовать между собой. Они могут помогать или мешать друг другу. Если несколько игроков хотят получить один и тот же нужный им ресурс, они должны сражаться за него. Этот элемент соперничества представляет наиболее привлекательную часть игры. Поэтому игроки стремяться как можно быстрее и лучше развить своего персонажа, чтобы сражаться с остальными.

Самый прямолинейный путь развития персонажа - это охота на монстров. После убийства каждого из них, игрок получает очки опыта для получения и улучшения своих умений, а также золото для покупки новых предметов. Мы попытаемся автоматизировать именно этот процесс, поскольку он ведёт к разностороннему развитию персонажа. В то же время есть и другие пути получения персонажем ресурсов: торговля, рыбалка, создание предметов и выполнение заданий.

Рассмотрим элементы игрового интерфейса изображенные на иллюстрации 2-12:

1. Окно состояния с параметрами персонажа игрока. Наиболее важные из них - это очки здоровья (health points или HP) и очки маны (mana points или MP).

2. Окно цели с информацией о выделенном в данный момент монстре. В нём есть полоска с HP цели.

3. Панель горячих клавиш с иконками возможных действий и доступных умений.

4. Окно чата для ввода игровых команд и отправки сообщений другим игрокам.

![Интерфейс Lineage 2](lineage-interface.png)

**Иллюстрация 2-12.** *Интерфейс Lineage 2*

Тщательное изучение интерфейса поможет вам в разработке алгоритма взаимодействия бота с игрой. Более подробно интерфейс описан на Wiki страничке (l2wiki.com/Game_Interface).

В интернете есть множество серверов Lineage 2. Они отличаются версией игры, дополнительными возможностями и системами защиты, которые предотвращают использование ботов. Наиболее эффектины такие системы на официальных серверах (www.lineage2.eu), созданных разработчиками игры. Кроме них есть так называемые пиратские сервера, которые поддерживаются энтузиастами. Как правило их защита значительно слабее. В нашем примере мы будем подключаться к серверу Rpg-Club (www.rpg-club.com).

## Реализация бота

Чтобы понять лучше механику игры, попробуйте убить нескольких монстров самостоятельно. Вы заметите, что почти всё время требуется нажимать одни и те же кнопки панели горячих клавиш. Пришло время составить алгоритм действий, которые мы хотим автоматизировать. Моя версия алгоримта выглядит следующим образом:

1. Выбрать монстра для атаки левым щелчком мыши по нему. Альтернативный способ - ввести следующую команду в окно чата:
```
/target ИмяМонстра

```
Полный лист игровых команд приведён на официальном сайте (l2wiki.com/classic/Commands).

2. Нажать кнопку "атака" на панели горячих клавиш. Это же действие можно выполнить с помощью клавиши F1.

3. Ожидать пока персонаж убьет монстра.

4. Нажать кнопку "подобрать" для сбора выпавших из монстра предметов и золота. Это действие так же можно выполнить по горячей клавише.

Этот алгоритм выглядит достаточно просто и не имеет никаких сложных условий. Напишем скрипт, чтобы автоматизировать его.

### Слепой бот



